#to load data covid <- read.table("covid_agg.csv", header=TRUE)
#but after help we loaded with covid <- read.table("covid_agg.csv", header=T)



#Point Pattern analysis  Friday Nov. 20th, issue with Covid file  after #ggplot(covid, aes(x = lon, y = lat)) + geom_point()
                                                                        #ggplot(covid, aes(x = lon, y = lat, size = cases)) + geom_point()
                                                                        

#changed the size of my dots to indicate cases, relative to size of dot, 20000-80000, looks nice
##install ggplot2, did earlier, call forward
library(ggplot2)
#make scatter plot
ggplot(covid, aes(x = lon, y = lat)) + geom_point()

#change the size of my dots (data)

#spatstat now

#Install spatstat, did it, something went well, then we write attach(covid)  #####go to line 17 and go from there for last part of Nov.20th lesson

#Populations spread, clumped etc. remember discussion on population
#copy in GIT up
#Now let's see the density of covid on planet

#> covid
head(covid)
summary(covid)

#let's make a planar point  pattern in spatstat

#ppp(() so we need lon x coor, y is lat, to call in , here we are making parameters and use c to make array in front of c(-180,180,-90,90)



covid_planar <- ppp(lon, lat,c(-180, 180), -90,90))

#Now we have longi, lat and ranges and how to know ranges
> # =attach(covid)  - must attach first
attach(covid)

# x,y, ranges    important remember this
names(covid)  
#yields  [1] "cat"     "country" "cases"   "lat"     "lon" 

The following objects are masked from covid (pos = 3):

    cases, cat, country, lat, lon

> covid_planar <- ppp(lon, lat, c(-180,180), c(-90,90))
> density_map <- density(covid_planar)   #very prettty
> plot(density_map)
> cl <- colorRampPalette(c('yellow','orange','red'))(100)
> cl <- colorRampPalette(c('yellow','orange','red'))(100) #
> plot(density_map, col = cl
+ )    # here see that I did not close the command with the ), just type it and it finishes and gives back the <#
> points(covid_planar)  #put dots in the colors

#density_map()  we are naming our map density_map with also the covid_planar we named with  attributes covid_planar <- ppp(lon, lat, c(-180,180), c(-90,90))
density_map <- density(covid_planar)
plot(density_map)        # I end here from Friday's lesson, made plot well, all good.  

#now use points with planar to see the points on map
density_map <-density(covid_planar)

#color, we can change 
cl <- colorRampPalette(c('yellow','orange','red'))(100) 

#then replot
plot(density_map, col=cl)

#points in plt again, always redo
points(covid_planar)  #can see these in R info to get all colors

#Putting the countries ontop of map
install.packages("rgdal")

#so this red plus means I did not finish the function and need to close it!

#his code tomorrow 
#Duccio called and fixed issue!  Finally I have data, from now on go to downloads and copy file into lab folder and no more extra copies anywhere
#dry my eyes and begin again...
covid <- read.table("covid_agg.csv", header=T)
> covid
head(covid)
summary(covid)

#Install rgdal for next time  - worked! good night.

